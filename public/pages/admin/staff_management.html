<script>
  (function(){
    function check(){
      if (window.firebase && firebase.auth) {
        firebase.auth().onAuthStateChanged(function(user){ if (!user) window.location.replace('/login.html'); });
      } else {
        var t = setInterval(function(){ if (window.firebase && firebase.auth) { clearInterval(t); firebase.auth().onAuthStateChanged(function(user){ if (!user) window.location.replace('/login.html'); }); } }, 100);
        setTimeout(function(){ clearInterval(t); }, 5000);
      }
    }
    check();
  })();
</script>

<div class="admin-page">
  <header class="topbar">
    <h1>Staff Management</h1>
  </header>
  <section>
  <div class="admin-card admin-card--narrow">
      <h3>Set Role by Email</h3>
      <div class="admin-form-group">
        <label for="staffEmail">Email</label>
        <input id="staffEmail" class="admin-input" type="email" placeholder="user@example.com">
      </div>
      <div class="admin-form-group">
        <label for="staffRole">Role</label>
        <select id="staffRole" class="admin-select">
          <option value="staff">Staff</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <button id="assignRoleBtn" class="admin-btn">Assign Role</button>
  <div id="roleMsg" class="admin-role-msg"></div>
    </div>
  <div class="admin-card admin-card--wide">
      <div class="admin-toolbar">
        <input id="searchRole" class="admin-input" placeholder="Search email">
        <button id="clearSearch" class="admin-btn secondary">Clear</button>
      </div>
      <table class="admin-table">
        <thead>
          <tr><th>Email</th><th>Role</th><th>Action</th></tr>
        </thead>
        <tbody id="rolesTableBody"></tbody>
      </table>
    </div>
  </section>
</div>

<script src="/Javascript/injectSidebar.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
<script src="/Javascript/firebase.js"></script>



